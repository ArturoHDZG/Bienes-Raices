"use strict";function responsiveMenu(){document.querySelector(".header-mobile-menu").addEventListener("click",(function(){document.querySelector(".navigation").classList.toggle("header-show-navigation")}))}function darkMode(){const e=window.matchMedia("(prefers-color-scheme: dark)"),n=document.querySelector(".btn-darkmode"),t=document.documentElement;function o(){const e=localStorage.getItem("color-mode"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;"true"===e||!e&&n?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")}o(),e.addEventListener("change",o),n.addEventListener("click",()=>{t.classList.toggle("dark-mode"),localStorage.setItem("color-mode",t.classList.contains("dark-mode"))})}function formatCurrencyInput(){const e=document.querySelector("#price");e&&e.addEventListener("blur",()=>{let n=e.value;n=n.replace(/,/g,""),n&&!isNaN(n)&&(n=parseFloat(n),n=n.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),e.value=n)})}function descriptionCounter(){const e=document.querySelector("#description");if(e){const n=document.createElement("div");n.classList.add("counter"),n.textContent="0/50",e.parentNode.insertBefore(n,e.nextSibling);const t=e.value.length;n.textContent=t+"/50",n.style.color=t>=50?"green":"",e.addEventListener("input",()=>{const t=e.value.length;n.textContent=t+"/50",n.style.color=t>=50?"green":""})}}function adminIndexSelectTypeQuery(){const e=document.querySelector(".type-admin");e&&e.addEventListener("change",()=>{e.form.submit()})}function initCantonSelect(){const e=document.querySelector("#province"),n=document.querySelector("#canton");if(e){const t=e.value;fetch("/ScriptHandler.php?province_id="+t).then(e=>e.json()).then(e=>{updateCantonSelect(e,n),updateCantonSelect(e,n),cantonValue&&n.querySelector(`option[value="${cantonValue}"]`)&&(n.value=cantonValue)}).catch(e=>{console.error(e)}),e.addEventListener("change",()=>{const t=e.value;fetch("/ScriptHandler.php?province_id="+t).then(e=>e.json()).then(e=>{updateCantonSelect(e,n)}).catch(e=>{console.error(e)})})}}function updateCantonSelect(e,n){n.innerHTML="";const t=document.createElement("option");t.value="0",t.disabled=!0,t.selected=!0,t.textContent="-- Seleccionar --",n.appendChild(t),e.forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.canton,cantonValue&&e.id===cantonValue&&(t.selected=!0),n.appendChild(t)})}function initImageUpload(){const e=document.querySelector("#images"),n=document.querySelector(".thumbnails-container"),t=document.querySelector("#image-counter");e&&(updateImageCounter(n,t,10),e.addEventListener("change",e=>{const o=e.target.files;updateImageCounter(n,t,10,o.length),createThumbnails(o,n)}))}function updateImageCounter(e,n,t,o=0){const a=e.querySelectorAll("img").length+o;n.textContent=`${a} / ${t}`,n.style.color=a>t?"red":"green"}function createThumbnails(e,n){for(const t of e){const e=createThumbnailDiv(),o=createThumbnailImg(t);e.appendChild(o);const a=createThumbnailSpan(e);e.appendChild(a),n.appendChild(e),readImageFile(t,o)}}function createThumbnailDiv(){const e=document.createElement("div");return e.classList.add("thumbnail"),e}function createThumbnailImg(e){const n=document.createElement("img");return n.classList.add("thumb"),n.file=e,n}function createThumbnailSpan(e){const n=document.createElement("span");return n.classList.add("delete"),n.textContent="x",n.addEventListener("click",(function(){e.remove(),updateImageCounter(container,counterElement,maxImages)})),n}function readImageFile(e,n){const t=new FileReader;var o;t.onload=(o=n,function(e){o.src=e.target.result}),t.readAsDataURL(e)}function initDeleteEvents(){const e=document.querySelector(".thumbnails-container");if(!e)return;const n=document.querySelector("#image-counter");e.querySelectorAll(".delete").forEach(t=>{t.addEventListener("click",(function(){t.parentElement.remove();const o=e.querySelectorAll("img").length;n.textContent=o+" / 10",n.style.color=o>10?"red":"green";const a=t.previousElementSibling.src.split("/").pop();document.querySelector("#imagesToDelete").value+=a+","}))})}function initImageGallery(){const e=document.querySelector("#main-image"),n=document.querySelectorAll(".thumbnail");e&&n.length>0&&n.forEach(n=>{n.addEventListener("click",()=>{e.src=n.src})})}function transformText(){document.querySelectorAll(".card h3").forEach(e=>{const n=e.textContent;n===n.toUpperCase()&&(e.textContent=n.toLowerCase())})}function selectContact(){const e=document.querySelectorAll('input[name="contact[preference]"]');function n(e){const n=document.querySelector("#contact-field");"prefer-phone"===e.target.value?n.innerHTML='\n        <input id="phone" name="contact[phone]" type="tel" placeholder="ej. 5555-5555">\n\n        <p>Elija la fecha y la hora para ponerse en contacto con usted:</p>\n\n        <label for="date">Fecha:</label>\n        <input id="date" name="contact[date]" type="date">\n\n        <label for="time">Hora:</label>\n        <input id="time" name="contact[time]" type="time" min="9:00" max="18:00" step="1800">\n      ':n.innerHTML='\n        <input id="email" name="contact[email]" type="email" placeholder="ej. correo@dominio.com">\n      '}e&&e.forEach(e=>e.addEventListener("click",n))}document.addEventListener("DOMContentLoaded",(function(){responsiveMenu(),darkMode(),formatCurrencyInput(),descriptionCounter(),adminIndexSelectTypeQuery(),initCantonSelect(),initImageUpload(),initDeleteEvents(),initImageGallery(),transformText(),selectContact()})),function(e,n,t){function o(e,n){return typeof e===n}function a(e){var n=d.className,t=s._config.classPrefix||"";if(m&&(n=n.baseVal),s._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}s._config.enableClasses&&(n+=" "+t+e.join(" "+t),m?d.className.baseVal=n:d.className=n)}function c(e,n){if("object"==typeof e)for(var t in e)u(e,t)&&c(t,e[t]);else{var o=(e=e.toLowerCase()).split("."),i=s[o[0]];if(2==o.length&&(i=i[o[1]]),void 0!==i)return s;n="function"==typeof n?n():n,1==o.length?s[o[0]]=n:(!s[o[0]]||s[o[0]]instanceof Boolean||(s[o[0]]=new Boolean(s[o[0]])),s[o[0]][o[1]]=n),a([(n&&0!=n?"":"no-")+o.join("-")]),s._trigger(e,n)}return s}var i=[],r=[],l={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout((function(){n(t[e])}),0)},addTest:function(e,n,t){r.push({name:e,fn:n,options:t})},addAsyncTest:function(e){r.push({name:null,fn:e})}},s=function(){};s.prototype=l,s=new s;var u,d=n.documentElement,m="svg"===d.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;u=o(e,"undefined")||o(e.call,"undefined")?function(e,n){return n in e&&o(e.constructor.prototype[n],"undefined")}:function(n,t){return e.call(n,t)}}(),l._l={},l.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),s.hasOwnProperty(e)&&setTimeout((function(){s._trigger(e,s[e])}),0)},l._trigger=function(e,n){if(this._l[e]){var t=this._l[e];setTimeout((function(){var e;for(e=0;e<t.length;e++)(0,t[e])(n)}),0),delete this._l[e]}},s._q.push((function(){l.addTest=c})),s.addAsyncTest((function(){function e(e,n,t){function o(n){var o=!(!n||"load"!==n.type)&&1==a.width;c(e,"webp"===e&&o?new Boolean(o):o),t&&t(n)}var a=new Image;a.onerror=o,a.onload=o,a.src=n}var n=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],t=n.shift();e(t.name,t.uri,(function(t){if(t&&"load"===t.type)for(var o=0;o<n.length;o++)e(n[o].name,n[o].uri)}))})),function(){var e,n,t,a,c,l;for(var u in r)if(r.hasOwnProperty(u)){if(e=[],(n=r[u]).name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(a=o(n.fn,"function")?n.fn():n.fn,c=0;c<e.length;c++)1===(l=e[c].split(".")).length?s[l[0]]=a:(!s[l[0]]||s[l[0]]instanceof Boolean||(s[l[0]]=new Boolean(s[l[0]])),s[l[0]][l[1]]=a),i.push((a?"":"no-")+l.join("-"))}}(),a(i),delete l.addTest,delete l.addAsyncTest;for(var A=0;A<s._q.length;A++)s._q[A]();e.Modernizr=s}(window,document);
//# sourceMappingURL=bundle.js.map
